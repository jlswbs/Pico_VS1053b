
/* Code automatically generated by Vult https://github.com/modlfo/vult */
#include "Fold.h"

fix16_t Fold_do(fix16_t signal, fix16_t level){
   fix16_t sign;
   if(signal > 0x0 /* 0.000000 */){
      sign = 0x10000 /* 1.000000 */;
   }
   else
   {
      sign = -0x10000 /* -1.000000 */;
   }
   fix16_t amp;
   amp = fix_mul(fix_abs(signal),(0x10000 /* 1.000000 */ + (level << 3)));
   fix16_t base;
   base = fix_floor(amp);
   fix16_t delta;
   delta = (amp + (- base));
   fix16_t out;
   if((fix_to_int(base) % 2) != 0){
      out = (0x10000 /* 1.000000 */ + (- delta));
   }
   else
   {
      out = delta;
   }
   return fix_mul(out,sign);
}


